# MatchTimeChat

### Описание компонентов проекта:

1. **Controller**  
   Контроллеры (Controllers) в Spring являются связующим звеном между клиентскими запросами (например, HTTP-запросами) и
   бизнес-логикой, реализованной в сервисах. Контроллеры принимают входящие HTTP-запросы, обрабатывают их (например,
   извлекают данные из тела запроса или URL) и передают соответствующие данные в сервисы для выполнения бизнес-логики.
   Затем они возвращают ответ (например, объект или статус) клиенту.

   В проекте:
    - `ChatController`: Обрабатывает запросы, связанные с чатами, такими как создание чата, добавление участников и
      получение всех участников чата.
    - `UserController`: Обрабатывает запросы, связанные с пользователями, такими как создание, обновление, удаление и
      получение пользователей.

2. **DTO (Data Transfer Object)**  
   DTO — это объект, предназначенный для передачи данных между слоями приложения, обычно между контроллером и сервисом.
   DTO используется для упрощения работы с данными, которые могут быть избыточными или сложными для прямого
   использования. В Spring DTO используются для упрощения сериализации/десериализации данных (например, для работы с
   JSON).

   В проекте:
    - `CreateChatDTO`: DTO для создания чата, содержащее данные, необходимые для создания чата.
    - `UserDTO`: DTO для создания/обновления пользователя, включающее данные о пользователе, такие как email, имя,
      фамилия и пароль.
    - `AddParticipantDTO`: DTO для добавления участника в чат.

3. **Exception**  
   Классы обработки исключений (Exception) используются для обработки ошибок, которые могут возникнуть во время
   выполнения приложения. В Spring можно создать глобальные обработчики ошибок с помощью аннотации `@ControllerAdvice`,
   чтобы перехватывать исключения, возникающие в контроллерах, и возвращать соответствующие HTTP-статусы и сообщения.

   Пример обработки исключений:
    - `UserNotFoundException`: Кастомное исключение для случая, если пользователь не найден.
    - `GlobalExceptionHandler`: Класс с методами для обработки всех исключений и возврата стандартных сообщений.

4. **Model**  
   Модели (Models) в Spring представляют собой объекты, которые соответствуют сущностям базы данных (таблицам). Они
   часто аннотируются с использованием `@Entity`, что указывает на то, что объект является сущностью для сохранения в
   базе данных. Модели также могут содержать дополнительные методы, которые представляют поведение данных.

   В проекте:
    - `User`: Сущность, которая представляет пользователя. Содержит данные, такие как email, имя, фамилия и т.д.
    - `Chat`: Сущность, представляющая чат. Может содержать поля для имени чата, даты создания и ссылки на создателя.
    - `ChatParticipant`: Связующая сущность между пользователем и чатом, представляющая участие пользователя в чате.

5. **Repository**  
   Репозитории (Repositories) предоставляют интерфейсы для взаимодействия с базой данных. В Spring они часто наследуют
   интерфейс `JpaRepository`, который автоматически предоставляет стандартные методы для CRUD (Create, Read, Update,
   Delete) операций. Репозитории позволяют работать с сущностями без необходимости писать SQL-запросы вручную.

   В проекте:
    - `UserRepository`: Интерфейс для работы с таблицей пользователей, предоставляет методы для поиска и сохранения
      пользователей.
    - `ChatRepository`: Интерфейс для работы с таблицей чатов.
    - `ChatParticipantRepository`: Интерфейс для работы с участниками чатов.

6. **Service**  
   Сервисы (Services) содержат бизнес-логику приложения и выполняют обработку данных, полученных из репозиториев.
   Сервисы не зависят от веб-слоя и могут быть использованы независимо от него. Обычно сервисы вызываются из
   контроллеров, чтобы выполнять операции, такие как создание, обновление и удаление данных.

   В проекте:
    - `UserService`: Сервис для обработки логики, связанной с пользователями, например, создание пользователя,
      обновление и удаление.
    - `ChatService`: Сервис для обработки логики, связанной с чатами и участниками чатов.

### Описание эндпоинтов

1. **Chat Endpoints**
    - **`POST /api/chats`**: Создает новый чат. Принимает тело с данными для чата (например, название чата и ID
      пользователя, создающего чат).
    - **`POST /api/chats/{chatId}/participants`**: Добавляет участника в чат. Принимает тело с ID пользователя, которого
      нужно добавить в чат.
    - **`GET /api/chats/{chatId}/participants`**: Получает список всех участников чата.

2. **User Endpoints**
    - **`GET /api/users`**: Получает список всех пользователей.
    - **`POST /api/users`**: Создает нового пользователя. Принимает тело с данными пользователя (email, имя, роль и
      пароль).
    - **`GET /api/users/{id}`**: Получает пользователя по ID.
    - **`PUT /api/users/{id}`**: Обновляет информацию о пользователе по ID.
    - **`DELETE /api/users/{id}`**: Удаляет пользователя по ID.

3. **Message Endpoints**
    - **`GET /api/messages/chat/{chatId}`**: Получает список всех сообщений для чата по `chatId`. Сообщения возвращаются
      отсортированными по времени отправки в порядке возрастания.
    - **`POST /api/messages`**: Отправляет новое сообщение в чат. Принимает тело с данными сообщения (текст, `chatId`,
      отправитель).
    - **`GET /api/messages/{id}`**: Получает сообщение по его ID.
    - **`DELETE /api/messages/{id}`**: Удаляет сообщение по его ID.

[Postman запросы](MatchTimeChat.postman_collection.json)
